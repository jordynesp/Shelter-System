<!DOCTYPE html>

<html>
  <head>
    <title> Home </title>
  </head>

<body>

<!-------------- New Staff Member  -------------->
<form class="form" id="staff">
  <label>New Staff Member</label><br>
  <label for="staff_name">Name:</label>
  <input type="text" name="staff_name" id="staff_name"><br>
  <label for="position">Position:</label>
  <input type="text" name="position" id="position"><br>
  <button type="submit">Add Staff Member</button>
</form><br><br>


<script>
  // add a new staff member through a form
  const staff = document.getElementById("staff");
  staff.addEventListener("submit", e => {
    e.preventDefault();
    // data to be sent to server
    let data = {
      name: document.getElementById("staff_name").value,
      position: document.getElementById("position").value
    }
    // create a fetch request
    fetch("/addStaff", {
      method: "POST",
      body: JSON.stringify(data),
      headers: {"Content-type": "application/json"}
    })
    .then(response => response.json())
    .then(json => console.log(json))
    .catch(err => console.log(err));
    // clear input fields
    document.getElementById("staff_name").value = "";
    document.getElementById("position").value = "";
  })
</script>


<!----------------- New Customer ---------------->
<form class="form" id="customer">
  <label>New Customer</label><br>
  <label for="customer_name">Name:</label>
  <input type="text" name="customer_name" id="customer_name"><br>
  <label for="room_num">Room Number:</label>
  <input type="text" name="room_num" id="room_num"><br>
  <label for="log">Log:</label>
  <input type="text" name="log" id="log"><br>
  <button type="submit">Add Customer</button>
</form><br><br>


<script>  
  // add a new customer through a form
  const customer = document.getElementById("customer");
  customer.addEventListener("submit", e => {
    e.preventDefault();
    // data to be sent to server
    let data = {
      name: document.getElementById("customer_name").value,
      room_num: document.getElementById("room_num").value,
      log: document.getElementById("log").value
    }
    // create a fetch request
    fetch("/addCustomer", {
      method: "POST",
      body: JSON.stringify(data),
      headers: {"Content-type": "application/json"}
    })
    .then(response => response.json())
    .then(json => console.log(json))
    .catch(err => console.log(err));
    // clear input fields
    document.getElementById("customer_name").value = "";
    document.getElementById("room_num").value = "";
    document.getElementById("log").value = "";
  })
</script>


<!------------- Get Available Rooms ------------->
<form class="form" id="roomList">
  <button type="submit">Get Available Rooms</button><br>
</form>
<textarea id="rooms" cols="75" rows="10"></textarea><br><br>


<script>
  // get all available rooms through clicking a button
  const roomList = document.getElementById("roomList");
  roomList.addEventListener("submit", e => {
    e.preventDefault();
    // fetch the room data
    fetch("/roomList")
    .then(response => response.json())
    .then(json => document.getElementById("rooms").value = json)
    .catch(err => console.log(err));  
  })
</script>


<!------------- Get Costumers w/ IDs ------------>
<form class="form" id="costumerList">
  <button type="submit">Get Customer IDs</button><br>
</form>
<textarea id="customer_ids" cols="75" rows="10"></textarea><br><br>


<script>
  // get all customers w/ their IDs through clicking a button
  const costumerList = document.getElementById("costumerList");
  costumerList.addEventListener("submit", e => {
    e.preventDefault();
    // fetch the name/ID pair data
    fetch("/customerList")
    .then(response => response.json())
    .then(json => {
      let result = "";
      Object.keys(json).forEach(key => {
        let row = json[key];
        result += `${row.name}: ${row.id}\n`;
      })
      document.getElementById("customer_ids").value = result;
    })
    .catch(err => console.log(err));  
  })
</script>


<!------------- Get Employees w/ IDs ------------>
<form class="form" id="employeeList">
  <button type="submit">Get Employee IDs</button><br>
</form>
<textarea id="employee_ids" cols="75" rows="10"></textarea><br><br>


<script>
  // get all employees w/ their IDs through clicking a button
  const employeeList = document.getElementById("employeeList");
  employeeList.addEventListener("submit", e => {
    e.preventDefault();
    // fetch the name/ID pair data
    fetch("/employeeList")
    .then(response => response.json())
    .then(json => {
      let result = "";
      Object.keys(json).forEach(key => {
        let row = json[key];
        result += `${row.name}: ${row.id}\n`;
      })
      document.getElementById("employee_ids").value = result;
    })
    .catch(err => console.log(err));  
  })
</script>

</body>

</html>